# Protocol

<div align="center">
<svg width="200" height="200" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="1024" height="1024" fill="black"/>
<path d="M699.6 455.346C698.552 455.382 697.257 455.426 695.573 455.426L695.472 455.292C690.73 456.367 684.833 455.98 678.8 455.584C660.909 454.41 641.827 453.158 648.156 489.72C649.566 497.773 639.794 499.753 633.313 500.089C614.91 501.095 596.441 501.498 578.005 501.129C574.512 501.072 570.947 498.137 567.724 495.485C567.166 495.026 566.619 494.575 566.083 494.149C565.512 493.679 567.662 487.606 568.77 487.539C586.754 486.49 593.279 474.302 599.785 462.151C603.059 456.037 606.327 449.931 611.049 445.259C653.764 402.945 697.386 361.437 747.288 327.345C752.157 324.022 758.101 320.969 762.13 326.74C765.238 331.199 762.331 333.725 759.347 336.319C758.042 337.453 756.722 338.6 755.884 339.928C752.871 344.705 747.525 348.226 742.209 351.728C731.769 358.604 721.443 365.405 729.12 381.503C735.779 395.441 729.822 397.914 720.664 401.716L720.288 401.871C716.369 403.513 712.361 405.003 708.355 406.493C699.831 409.663 691.315 412.83 683.685 417.441C676.028 422.072 672.368 431.098 684.894 436.434C712.262 448.077 783.119 429.488 796.954 403.851C809.882 379.863 829.204 362.071 848.511 344.293C859.344 334.317 870.174 324.345 879.866 313.285C900.772 289.459 925.243 268.762 949.728 248.054C961.899 237.76 974.074 227.464 985.815 216.779C994.647 208.726 998.307 198.122 991.389 186.545C984.505 175.036 972.819 173.492 961.838 176.076C889.47 193.089 819.554 216.041 757.463 258.891C658.331 327.311 559.031 395.496 458.926 462.473C424.807 485.324 404.155 474.15 392.771 434.588C367.484 346.74 330.41 270.132 223.891 258.22C184.97 253.858 156.426 278.219 162.068 316.875C164.922 336.472 162.337 354.927 152.9 373.316C150.82 377.376 148.72 381.437 146.617 385.503C132.087 413.598 117.432 441.935 108.338 471.835C107.577 474.335 106.706 476.967 105.808 479.679C97.7001 504.159 87.3938 535.278 136.58 537C138.595 537.067 142.456 542.134 141.986 544.013C140.912 548.476 138.729 553.778 135.236 556.361C88.0885 591.091 49.3358 633.136 32.6795 690.013C24.2506 718.737 29.825 748.568 54.3729 770.815C71.9359 786.72 94.3681 795.948 114.047 782.56C131.996 770.353 151.693 762.16 171.35 753.985C188.652 746.789 205.923 739.606 221.943 729.71C225.805 727.321 230.495 725.139 235.242 722.93C248.368 716.823 261.922 710.517 259.554 699.107C255.827 681.222 236.92 664.645 221.171 651.626C205.556 638.707 165.762 551.966 170.497 531.128C177.127 501.947 192.055 476.682 206.998 451.392C219.753 429.804 232.52 408.197 240.144 384.121C243.301 374.188 255.39 368.752 267.043 372.712C274.951 375.389 273.605 382.643 272.351 389.401C272.317 389.588 272.282 389.774 272.248 389.959C267.524 415.933 262.889 441.937 258.255 467.941C255.938 480.94 253.621 493.939 251.293 506.934C249.816 515.256 252.401 521.9 261.032 523.578C277.654 526.832 277.285 534.315 269.796 547.167C261.838 560.791 260.729 577.434 269.628 590.018C278.561 602.668 293.505 605.319 308.683 597.735C318.153 593.038 325.508 597.232 325.407 606.762C324.802 657.666 346.126 646.19 372.085 623.976C374.472 621.931 377.726 620.8 380.868 619.707C381.438 619.508 382.005 619.311 382.562 619.11C385.025 618.232 387.49 617.358 389.955 616.484C438.819 599.16 487.619 581.858 515.208 531.866C517.336 527.961 524.334 526.069 529.774 524.597C530.085 524.513 530.39 524.431 530.689 524.349C562.237 515.783 594.443 515.655 626.63 515.527C650.803 515.431 674.964 515.335 698.83 511.665C722.37 508.041 748.026 494.317 748.228 471.6C748.415 453.285 734.386 454.423 720.368 455.56C714.302 456.052 708.239 456.544 703.33 455.46C702.335 455.253 701.289 455.288 699.6 455.346Z" fill="white"/>
<path d="M328.798 711.824C322.955 750.681 337.798 783.935 398.546 783.499H398.513C450.396 781.385 509.096 750.01 566.452 709.878C604.332 683.369 637.074 655.417 658.297 614.11C673.912 583.742 665.886 559.381 642.346 538.073C631.969 528.678 622.063 527.638 610.444 538.979C569.206 579.313 517.86 601.326 465.138 623.472C451.703 629.122 436.401 631.941 420.99 634.779C379.929 642.343 338.101 650.047 328.798 711.824Z" fill="white"/>
</svg>
  <h3>Decentralized Compute Infrastructure for AI</h3>
</div>

Prime Network is a peer-to-peer compute and intelligence network that enables decentralized AI development at scale. This repository contains the core infrastructure for contributing compute resources to the network, including workers, validators, and the coordination layer.

## ðŸ“š Table of Contents
- [System Architecture](#system-architecture)
- [Getting Started](#getting-started)
- [Installation](#installation)
- [Usage](#usage)
- [Development](#development)
- [Community](#community)
- [Contributing](#contributing)
- [Security](#security)
- [License](#license)

## System Architecture 

The system follows a modular architecture with the following key components:

### Component Overview

- **Smart Contracts**: Ethereum-based contracts manage the protocol's economic layer
- **Discovery Service**: Enables secure peer discovery and metadata sharing
- **Orchestrator**: Coordinates compute jobs across worker nodes
- **Validator Network**: Ensures quality through random challenges
- **Worker Nodes**: Execute AI workloads in secure containers

## Getting Started

### Prerequisites

Before running Prime Protocol, ensure you have the following requirements:

#### Hardware
- Linux or macOS operating system
- CUDA-capable GPU(s) for mining operations

#### Software
- [Docker Desktop](https://www.docker.com/products/docker-desktop/) - Container runtime
- [Git](https://git-scm.com/) - Version control
- [Rust](https://www.rust-lang.org/) - Programming language and toolchain
- [Redis](https://redis.io/) - In-memory data store
- [Foundry](https://book.getfoundry.sh/) - Smart contract development toolkit
- [tmuxinator](https://github.com/tmuxinator/tmuxinator) - Terminal session manager

## Installation

### 1. Clone Repository
```bash
git clone --recurse-submodules https://github.com/prime-ai/protocol.git
cd protocol
git submodule update --init --recursive
```

### 2. Install Dependencies
```bash
# Install Foundry
curl -L https://foundry.paradigm.xyz | bash
foundryup

# Install Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Install cargo-watch
cargo install cargo-watch

# Install Redis (MacOS)
brew install redis

# Install Redis (Ubuntu)
# sudo apt-get install redis-server

# Install tmuxinator (do not use brew)
gem install tmuxinator
```

### 3. Configure Environment
- Enable "Allow the default Docker socket to be used" in Docker Desktop settings
- Create `.env` files in base folder and discovery folder

## Development

### Starting the Development Environment

To start all core services:
```bash
make up
```

This will launch:
- Local blockchain node
- Discovery service
- Validator node
- Orchestrator service
- Redis instance
- Supporting infrastructure

### Running a Worker Node

Once the core services are running, you can start a worker node in a new terminal:
```bash
make watch-worker
```

The worker will automatically connect to the discovery service and begin processing tasks.
It takes a couple of seconds until the worker is whitelisted. This is done using a simple loop on the second page of tmux.

You can find more details on the APIs in the orchestrator and discovery service directory.

### Deploying a task

First, you need to create a local worker (after you have all other services running using e.g. `make up`) 

```bash
make watch-worker
```

check that the worker as been registered on the orchestrator: 

```bash
curl -X GET http://localhost:8090/nodes -H "Authorization: Bearer admin"
>>> {"nodes":[{"address":"0x66295e2b4a78d1cb57db16ac0260024900a5ba9b","ip_address":"0.0.0.0","port":8091,"status":"Healthy","task_id":null,"task_state":null}],"success":true}
```


then lets create a task

```bash
curl -X POST http://localhost:8090/tasks -H "Content-Type: application/json" -H "Authorization: Bearer admin" -d '{"name":"sample","image":"ubuntu:latest"}'
>>> {"success":true,"task":"updated_task"}% 
```

and check that the task is created

```bash
curl -X GET http://localhost:8090/nodes -H "Authorization: Bearer admin"
>>> {"nodes":[{"address":"0x66295e2b4a78d1cb57db16ac0260024900a5ba9b","ip_address":"0.0.0.0","port":8091,"status":"Healthy","task_id":"29edd356-5c48-4ba6-ab96-73d002daddff","task_state":"RUNNING"}],"success":true}%     
```

you can also check docker ps to see that the docker is running locally

```bash
docker ps
CONTAINER ID   IMAGE                               COMMAND                  CREATED          STATUS          PORTS                                         NAMES
e860c44a9989   ubuntu:latest                       "sleep infinity"         3 minutes ago    Up 3 minutes                                                  prime-task-29edd356-5c48-4ba6-ab96-73d002daddff
ef02d23b5c74   redis:alpine                        "docker-entrypoint.sâ€¦"   27 minutes ago   Up 27 minutes   0.0.0.0:6380->6379/tcp, [::]:6380->6379/tcp   prime-worker-validator-redis-1
7761ee7b6dcf   ghcr.io/foundry-rs/foundry:latest   "anvil --host 0.0.0.â€¦"   27 minutes ago   Up 27 minutes   0.0.0.0:8545->8545/tcp, :::8545->8545/tcp     prime-worker-validator-anvil-1
```


### Stopping Services

To gracefully shutdown all services:
```bash
make down
```

## Community

- [Discord](https://discord.gg/primeintellect)
- [X](https://x.com/PrimeIntellect)
- [Blog](https://www.primeintellect.ai/blog)

## Contributing
We welcome contributions! Please see our [Contributing Guidelines](CONTRIBUTING.md).

## Security
See [SECURITY.md](SECURITY.md) for security policies and reporting vulnerabilities.
